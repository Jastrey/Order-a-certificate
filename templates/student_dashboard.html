{% extends "base.html" %}

{% block content %}
<div class="dashboard">
    <h2>üìã –ú–æ–∏ –∑–∞–∫–∞–∑–∞–Ω–Ω—ã–µ —Å–ø—Ä–∞–≤–∫–∏</h2>
    <p class="page-description">–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∑–∞–∫–∞–∑–∞–Ω–Ω—ã—Ö —Å–ø—Ä–∞–≤–æ–∫</p>
    
    <div class="filters">
        <form method="GET" action="{{ url_for('student_dashboard') }}" class="search-form">
            <input type="text" name="search" value="{{ search }}" placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û...">
            <button type="submit" class="btn btn-primary">–ù–∞–π—Ç–∏</button>
            {% if search %}
                <a href="{{ url_for('student_dashboard') }}" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
            {% endif %}
        </form>
    </div>

    <div class="stats">
        <div class="stat-card">
            <h3>–í—Å–µ–≥–æ —Å–ø—Ä–∞–≤–æ–∫</h3>
            <span>{{ certificates|length }}</span>
        </div>
        <div class="stat-card">
            <h3>–í —Ä–∞–±–æ—Ç–µ</h3>
            <span>{{ certificates|selectattr('status', 'equalto', '–≤ —Ä–∞–±–æ—Ç–µ')|list|length }}</span>
        </div>
        <div class="stat-card">
            <h3>–ì–æ—Ç–æ–≤–æ</h3>
            <span>{{ certificates|selectattr('status', 'equalto', '–≥–æ—Ç–æ–≤–æ')|list|length }}</span>
        </div>
        <div class="stat-card">
            <h3>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</h3>
            <span>{{ certificates|selectattr('status', 'equalto', '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ')|list|length }}</span>
        </div>
    </div>

    {% if certificates %}
    <div class="certificates-list">
        {% for cert in certificates %}
        <div class="certificate-card status-{{ cert.status.replace(' ', '-') }}">
            <div class="certificate-header">
                <h3>–°–ø—Ä–∞–≤–∫–∞ #{{ cert.id }}</h3>
                <span class="status-badge">{{ cert.status }}</span>
            </div>
            <div class="certificate-info">
                <p><strong>–°—Ç—É–¥–µ–Ω—Ç:</strong> {{ cert.student_name }}</p>
                <p><strong>–ì—Ä—É–ø–ø–∞:</strong> {{ cert.student_group }}</p>
                <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ cert.birth_date }}</p>
                <p><strong>–ú–µ—Å—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> {{ cert.request_place }}</p>
                <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> {{ cert.quantity }} —à—Ç.</p>
                {% if cert.comment %}
                <p><strong>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</strong> {{ cert.comment }}</p>
                {% endif %}
                <p><strong>–î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞:</strong> {{ cert.created_at }}</p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <h3>–°–ø—Ä–∞–≤–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–ó–∞–∫–∞–∂–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–ø—Ä–∞–≤–∫—É –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
        <a href="{{ url_for('order_certificate') }}" class="btn btn-primary">–ó–∞–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É</a>
    </div>
    {% endif %}
</div>
{% endblock %}